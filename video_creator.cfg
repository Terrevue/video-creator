# Paths Section: Specifies the directories for input MP3 and MP4 files.
# mp3_directory: Directory containing MP3 files.
# mp4_directory: Directory containing MP4 files.
# mp4_prefix: A prefix to filter MP4 files in the directory. 
#              Leave empty to include all MP4 files.

[Paths]
mp3_directory = /Users/chris/Dropbox/Projects/Source/xlights/christmas/sequences/Audio
mp4_directory = /Users/chris/Dropbox/Projects/Source/xlights/christmas/sequences/Video/bg
mp4_prefix = 

# Output Section: Configuration related to the output video file.
# file_prefix: Prefix for the output video file names.
# output_length: Determines the length of the output video.
#                Set to a specific duration in seconds or 'mp3' to match the length of the audio track.
# output_directory: Directory to save the output video files.
# output_exists: Determines how to handle existing output files.
#                'overwrite' will overwrite existing files.
#                'skip' will skip existing files.
# scale: Sets the resolution for the output video. Format: width:height.

[Output]
file_prefix =
output_length = mp3
output_directory = /Users/chris/Dropbox/Projects/Source/xlights/christmas/sequences/Video/output_uncompressed
output_exists = skip
scale = 1280:720

# Compression Section: Optional post-processing compression
# enabled: Set to true to compress output videos after generation
# use_hardware: Set to true to use hardware encoding (VideoToolbox on Mac, faster but less efficient)
# crf: Constant Rate Factor for software encoding (18-35, higher = more compression, 30 recommended)
#      Note: CRF is ignored when use_hardware=true, use quality instead
# quality: Quality for hardware encoding (0-100, higher = better quality, 65 recommended)
#          Note: VideoToolbox is less efficient than libx264, so files may be larger
# preset: Encoding speed preset for software encoding (ultrafast, fast, medium, slow, slower, veryslow)
#         Note: preset is ignored when use_hardware=true
# audio_bitrate: Audio bitrate (128k is sufficient for FM broadcast quality)
# output_directory: Directory to save compressed videos

[Compression]
enabled = true
use_hardware = false
crf = 30
quality = 65
preset = slow
audio_bitrate = 128k
output_directory = /Users/chris/Dropbox/Projects/Source/xlights/christmas/sequences/Video/output_compressed

# Animation Section: Configure transitions between animation groups
# transition: Type of transition between animation groups (fade, wipe, cut)
# transition_duration: Duration of transitions in seconds

[Animation]
transition = fade
transition_duration = 0.5

# Line Sections: Each 'Line' section defines a text or image overlay in the video.
#                Multiple 'Line' sections can be added for different overlays.
#                The text can include placeholders for MP3 metadata (e.g., {title}, {artist}).
#                Any drawtext options can be used in the 'Line' sections (see https://ffmpeg.org/ffmpeg-filters.html#toc-drawtext-1 for additional info).
#
# Text overlay options:
# fontfile: Path to the font file used for the text.
# text: The text to be overlaid. Can include placeholders for MP3 metadata (e.g., {title}, {artist}).
# fontsize: Size of the font.
# fontcolor: Color of the font.
# bordercolor: Color of the text border.
# borderw: Width of the text border.
# shadowcolor: Color of the text shadow.
# shadowx: Horizontal offset for the text shadow.
# shadowy: Vertical offset for the text shadow.
# x: X-coordinate for text placement.
# y: Y-coordinate for text placement.
#
# Image overlay options:
# image: Path to the image file to overlay.
# scale: Scale the image (format: width:height, use -1 for auto, e.g., 250:-1)
# x: X-coordinate for image placement (can use expressions like (main_w-overlay_w)/2)
# y: Y-coordinate for image placement (can use expressions like (main_h-overlay_h)/2)
#
# Animation options (optional, for both text and image overlays):
# animation_group: Name of the animation group (overlays with same group appear/disappear together)
# animation_duration: Duration in seconds that this group is visible before switching to next group
#
# Note: Overlays without animation_group are always visible (static overlays)


[Line_TheseLights]
fontfile=/Users/chris/Library/Fonts/Sofia-Regular.otf
text=These Lights
fontsize=160
fontcolor=white
bordercolor=black
borderw=5
shadowcolor=black
shadowx=10
shadowy=10
x=(w-text_w)/2
y=h/4 - text_h/2
animation_group=music_direction
animation_duration=5

[Line_AreSetTo]
fontfile=/Users/chris/Library/Fonts/Sofia-Regular.otf
text=are synchronized to
fontsize=80
fontcolor=white
bordercolor=black
borderw=5
shadowcolor=black
shadowx=10
shadowy=10
x=(w-text_w)/2
y=h/4 + 110
animation_group=music_direction
animation_duration=5

[Line_Music]
fontfile=/Users/chris/Library/Fonts/Sofia-Regular.otf
text=Music!
fontsize=225
fontcolor=white
bordercolor=black
borderw=5
shadowcolor=black
shadowx=10
shadowy=10
x=(w-text_w)/2
y=2*h/3 - text_h/2
animation_group=music_direction
animation_duration=5

[Line_TuneTo]
fontfile=/Users/chris/Library/Fonts/Sofia-Regular.otf
text=Tune to
fontsize=180
fontcolor=white
bordercolor=black
borderw=5
shadowcolor=black
shadowx=10
shadowy=10
x=(w-text_w)/2
y=(h-text_h)/2 - text_h - 10
animation_group=fm_display
animation_duration=5

[Line_Frequency]
fontfile=/System/Library/Fonts/Supplemental/Impact.ttf
text=100.1 FM
fontsize=225
fontcolor=white
bordercolor=black
borderw=5
shadowcolor=black
shadowx=10
shadowy=10
x=(w-text_w)/2
y=(h-text_h)/2
animation_group=fm_display
animation_duration=5

# ===== Always-visible static overlays =====


[Line_SongTitle]
fontfile=/Users/chris/Library/Fonts/Sofia-Regular.otf
text={title}
fontsize=60
fontcolor=white
bordercolor=black
borderw=3
shadowcolor=black
shadowx=5
shadowy=5
x=(w-text_w)/2
y=h-text_h-60

[Line_SongArtist]
fontfile=/Library/Fonts/Microsoft/Franklin Gothic Medium Italic.ttf
text={artist}
fontsize=50
fontcolor=white
bordercolor=black
borderw=2
shadowcolor=black
shadowx=3
shadowy=3
x=(w-text_w)/2
y=h-text_h-20

# ===== Animation Group 2: QR Code Display =====

[Line_QR]
image=/Users/chris/Dropbox/Projects/Source/xlights/christmas/sequences/Images/800h/PulseMesh_QR.png
scale=-1:450
x=(main_w-overlay_w)/2
y=(main_h-overlay_h)/2
animation_group=qr_display
animation_duration=5

[Line_QRText]
fontfile=/Users/chris/Library/Fonts/Sofia-Regular.otf
text=Listen on Your Phone
fontsize=90
fontcolor=white
bordercolor=black
borderw=3
shadowcolor=black
shadowx=5
shadowy=5
x=(w-text_w)/2 + 10
y=25
animation_group=qr_display
animation_duration=5

# alpha=0.5
# rotate=PI/4

[Line_Logo]
image=/Users/chris/Dropbox/Projects/Source/xlights/christmas/sequences/Images/logo01.png
scale=-1:200
x=10
y=10

# Additional 'Line' sections can be added in the same format for more text overlays.